# 超Prologのページ

ここでは、次世代のPrologについて考える。

## モチベーション

計算機科学で用いられる推論規則を考えるのにPrologはかなり向いている。
しかし、Prologでは足りない機能が複数存在しているため、Prologそのもので完全に推論規則を再現することは難しい。
そこで、ここでは、新しい論理型言語を作ることを考えてみる。

## やってみたいこと

### 水平線構文。推論規則の図のように書きたい。

    A + B ---> R :- R is A + B.

を以下のように書きたい。

    R is A + B
    ------------ (E-Add)
    A + B ---> R

Prologを新たに作らなくてもterm_expansionで可能だ。

    :- op(1200,xfx,--).
    term_expansion(A--B,B:-A).

    R is A + B
    --%--------- (E-Add)
    A + B ---> R.

と記述すればよい。

### ErlangはPrologに似て変数が大文字だったけど、Elixerは小文字が変数となった。Prologも同様にした方が良いのではないか。

Prologは多くの言語を扱うメタな言語だ。したがって、大文字と小文字は逆のほうが良いのかもしれない。
しかし、通常の汎用言語として考えた場合は、大文字と小文字は昨今の流れでは逆転している。
大文字小文字を逆転させた処理系を作成し、実際に使ってみることで、起きる問題をここで取り上げて検討してみたい。

### カンマをなくす。 複数空白文字でカンマの役割としたい。

    A ---> A_   B ---> B_   R is A + B
    --%--------------------------------
    A + B ---> R.

のように記述したい。カンマの代わりに空白２文字あるいは３文字以上を使えると良いのではないだろうか。


### ドットレスにしたい。現状のPrologは述語定義の最後に.を書く必要があるが、.は書かなくても良いようにしたい。たとえば、空行が含まれれば.の意味とするのはどうか。

    A ---> A_, B ---> B_, R is A + B
    --%--------------------------------
    A + B ---> R.

のように書けるわけだけど、最後のドットが気になる。

    A ---> A_, B ---> B_, R is A + B
    --%--------------------------------
    A + B ---> R

と書きたい。


### 置換構文 a[b/c]のように書くことができるようにしたい。

Prologにはa[]のような演算子は存在しないので、a/[b/c]のように書くことで実現することにする。
そうやりたい場合は、term_expansionを使うことで実現できる。

### a[], a{}のような構文を導入したい。

    :- op(100,xfy,'[]').
    :- op(100,xfy,'{}').

上記のように定義することで、 a[]は '[]'(a) a{}は '{}'(a) a[b,c]は'[]'(a,(b,c))などと定義できるのではないか。

### 評価文脈 E[a b]のように書きたい。

置換構文同様にE/[a b]のように書くことで評価文脈を実現できそうだ。しかしながら、やってみないとわからない。

### 関数適用構文を導入したい。

    Γ |- A ---> (λX->Y), Γ |- B ---> B_,
    --%--------------------------------
    Γ |- A B ---> Y/[X/B_].

のように書くために、`A B`と書けるようにしたい。

演算子名は''あるいは、'@','$'が良いと考える。'@'はClean Bookで用いられたところによる。'$'はHaskellの$でもあり、FLOPSのPrologの論文によるところもある。

    :- op(100,xfy,'').

などと定義することで、様々な記法に対応できるようになるのではないかと思う。


### リスト構文は例えば、Γ,x=1,y=2のように書きたい。

### 変数名によるバリデータ登録

Fortlanでは、変数名から暗黙的に型がつく。同様に、操作的意味論では変数名から型を推論するように記述する。
変数名から型名を推論できる機構を作成し、バリデーションが可能となると嬉しい。
